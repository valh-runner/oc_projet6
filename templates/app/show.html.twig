{% extends 'base.html.twig' %}

{% form_theme commentForm 'bootstrap_4_layout.html.twig' %}

{% block fullbanner %}
	<div class="fixed faded" id="fullbanner"></div>
{% endblock %}

{% block body %}
	<div class="row">
		<div class="offset-sm-1 col-sm-10 offset-md-1 col-md-10 offset-lg-2 col-lg-8" id="content">
			<div class="row">
				<div class="container-fluid" id="second-container">
					<div class="row" id="trick-head">
						<img class="" id="trick-head-banner" src="{{ trick.pictures.first.filename }}" alt="">
						<div class="" id="trick-head-title"><h1>{{ trick.name }}</h1></div>
					</div>
					<article class="trick-details">
						<div id="medias" class="row">
							{% for picture in trick.pictures %}
								<div class="col-sm-6 col-md-4 col-lg-3 trick-details-media">
									<img class="img-fluid" src="{{ picture.filename }}" alt="">
								</div>
							{% endfor %}
							{% for video in trick.videos %}
								<div class="col-sm-6 col-md-4 col-lg-3 trick-details-media">
									<iframe class="" width="" height="" src="{{ video.embedLink }}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
								</div>
							{% endfor %}
						</div>
						<div id="description">
							{{ trick.description | raw }}
						</div>
						<div id="tags">
							<span>Créé le {{ trick.creationMoment | date('d/m/Y') }} à {{ trick.creationMoment | date('H:i') }}</span>
							<span>catégorie {{ trick.category.name }}</span>
						</div>
					</article>
					<hr>
					{% if app.user %}
						{{ form_start(commentForm, {
							'attr': {'class': "form-inline"}
						}) }}
						<div class="form-group">
						    <i class="fa fa-calendar"></i> 
						    {{ form_widget(commentForm.content) }}

						    <small>{{ form_help(commentForm.content) }}</small>

						    <div class="form-error">
						        {{ form_errors(commentForm.content) }}
						    </div>
						</div>
						{#{ form_row(commentForm.author, {'attr': {'placeholder': "Votre nom"}}) }#}
						{#{ form_row(commentForm.content, {
							'attr': {'placeholder': "Votre commentaire"},
							'attr': {'class': "mx-2"}
						}) }#}
						<button type="submit" class="btn btn-success">Laisser un commentaire</button>
						{{ form_end(commentForm) }}
					{% else %}
						<h2>Vous ne pouvez pas commenter si vous n'êtes pas connecté !</h2>
						<a href="{{ path('security_login') }}" class="btn btn-primary">Connexion</a>
					{% endif %}
					<hr>
					<section id="commentaires">
						<h1>{#{ trick.comments | length }#} {{ comments | length }} commentaires : </h1>
						{% for comment in comments %}
						<div class="row comment">
							<div class="offset-1 col-1">
								img
							</div>
							<div class="col-9 comment-content">
								<div>
									{{comment.content | raw}}
								</div>
								<div>
									{{comment.user.username}} (<small>{{comment.creationMoment | date('d/m/Y à H:i') }}</small>)
								</div>
							</div>
						</div>
						{% endfor %}
					</section>
				</div>
			</div>
		</div>
	</div>
{% endblock %}